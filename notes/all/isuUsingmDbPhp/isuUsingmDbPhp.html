

<div ng-controller="isuUsingmDbPhpCtrl">
    <h3 class="text-center">Insert-Show-and-Update-Using-MongoDB-and-Php</h3>

    <!--<button class="btn btn-primary" ng-click="isuUsingmDbPhp()">Example</button>-->

    <div style="font-size:1.2em;line-height: 1.9em;">
        <xmp>
            1.  install mongodb from the official website
            2.  change the default installation to custom like "c:\MongoDB"
            3.  open the command prompt as admin and type "md \data\db", and it creates a directory for mongo
            4.  add the system environment variable by going to the advanced option in the system properties and add the path by locating the installation path of the MongoDB\bin for environmental variable
            5.  open the command prompt as admin and type "C:\MongoDB\bin>mongod.exe"
            6.  open another command prompt as admin and type "C:\MongoDB\bin>mongo.exe"
            7.  Point 5 is used to connect to the server.
            8.  Point 6 is used to make operations to the database using the mongo shell and it opens type the commands as show dbs to lists all the databases in the localstorage
            9.  Add drivers to the xampp, to access from the localhost:port
        </xmp>
    </div>


    <div class="container">
        <div class="panel-group" id="accordion">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="?#collapse1">index.php</a>
                    </h4>
                </div>
                <div id="collapse1" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <xmp>
                            <!DOCTYPE html>
                            <html>
                            <head>
                                <title>ISUD</title>
                            </head>
                            <body>
                                <form action="?" method="post">
                                    <input type="text" name="name" placeholder="name" /><br>
                                    <input type="submit" name="submit" value="submit" /><br>
                                    <button><a href="isud_show.php">Show</a></button>
                                </form>

                                <br>


                            </body>
                        </html>

                        <?php
                        if ($_POST) {
                        $connection = new Mongo();
                        $db = $connection->mongophp;
                        $rec['name'] = $_POST['name'];
                        $db->isud->insert($rec);
                        }
                        ?>
                    </xmp>
                </div>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-parent="#accordion" href="?#collapse2">isud_show.php</a>
                </h4>
            </div>
            <div id="collapse2" class="panel-collapse collapse">
                <div class="panel-body">
                    <xmp>
                    <?php
                        $connection = new Mongo();
                        $db = $connection->mongophp;
                        $mObj = $db->isud->find();
                        ?>

                        <html>
                        <head>
                            <title>Show Data</title>
                        </head>
                        <body>
                            <table border="1">
                                <tr>
                                    <td>Name</td>
                                    <td>Action</td>
                                </tr>
                                <?php
                                foreach ($mObj as $row) {
                                //echo "
                                <pre>";
                //print_r($row);die;
                ?>
                                <tr>
                                <td><?php echo $row['name'] ?></td>
                                <td>
                                <a href="isud_up.php?id=<?php echo $row['_id'];?>">Update</a>
                                <a href="isud_del.php?id=<?php echo $row['_id'];?>">Delete</a>
                </td>
                </tr>
                <?php
                }
                ?>
                            </table>

                            <button><a href="index.php">Add Data</a></button>

                        </body>
                    </html>
                </xmp>
            </div>
        </div>
    </div>


    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="?#collapse3">isud_del.php</a>
            </h4>
        </div>
        <div id="collapse3" class="panel-collapse collapse">
            <div class="panel-body">
                <xmp>
                    <?php
                    $id=$_GET['id'];
                    $connection = new Mongo();
                    $db = $connection->mongophp;
                    $id = new MongoId($id);
                    $db->isud->remove(array('_id' => $id));

                    header('location:isud_show.php');
                    ?>
                </xmp>
            </div>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="?#collapse4">isud_up.php</a>
            </h4>
        </div>
        <div id="collapse4" class="panel-collapse collapse">
            <div class="panel-body">
                <xmp>
                    <?php
                    $id=$_GET['id'];
                    $connection = new Mongo();
                    $db = $connection->mongophp;
                    $id = new MongoId($id);
                    $mObj = $db->isud->findOne(array('_id' => $id));
                    //echo "<pre>";
//print_r($mObj);
?>
<html>
<head>
                    <title>Update Data</title>
</head>
<body>
<form action="isud_updata.php" method="post">
                    <input name="name" placeholder="name" value="<?php echo $mObj['name'] ?>" />
                    <input name="id" type="hidden" value="<?php echo $mObj['_id'] ?>" />
                    <input type="submit" name="submit" value="submit" />
</form>
</body>
</html>
                </xmp>
            </div>
        </div>
    </div>



    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="?#collapse5">isud_updata.php</a>
            </h4>
        </div>
        <div id="collapse5" class="panel-collapse collapse">
            <div class="panel-body">
                <xmp>
                    <?php
                    if ($_POST) {
                    $connection = new Mongo();
                    $db = $connection->mongophp;
                    $id = new MongoId($_POST['id']);
                    $db->isud->update(
                    array('_id' => $id),
                    array(
                    '$set' => array(
                    'name' => $_POST["name"]
                    )
                    )
                    );
                    header('location:isud_show.php');
                    }
                </xmp>
            </div>
        </div>
    </div>
</div>
</div>

</div>